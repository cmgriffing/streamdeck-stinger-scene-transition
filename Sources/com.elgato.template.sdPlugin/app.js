parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"TMkh":[function(require,module,exports) {
"use strict";function t(n){if(!(this instanceof t))return new t(n);n=n||{},this.concurrency=n.concurrency||1/0,this.pending=0,this.jobs=[],this.cbs=[],this._done=i.bind(this)}var n=["push","unshift","splice"];function i(){this.pending--,this._run()}n.forEach(function(n){t.prototype[n]=function(){var t=Array.prototype[n].apply(this.jobs,arguments);return this._run(),t}}),Object.defineProperty(t.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),t.prototype._run=function(){if(this.pending!==this.concurrency){if(this.jobs.length){var t=this.jobs.shift();this.pending++,t(this._done),this._run()}if(0===this.pending)for(;0!==this.cbs.length;){var n=this.cbs.pop();process.nextTick(n)}}},t.prototype.onDone=function(t){"function"==typeof t&&(this.cbs.push(t),this._run())},module.exports=t;
},{}],"FFSq":[function(require,module,exports) {
"use strict";function t(t,n){const o=Buffer.allocUnsafe(n);for(var r=0,c=0;c<t.length;c++){const n=t[c];n.copy(o,r),r+=n.length}return o}function n(t,n,o,r,c){for(var e=0;e<c;e++)o[r+e]=t[e]^n[3&e]}function o(t,n){const o=t.length;for(var r=0;r<o;r++)t[r]^=n[3&r]}try{const c=require("bufferutil"),e=c.BufferUtil||c;module.exports={mask(t,o,r,c,s){s<48?n(t,o,r,c,s):e.mask(t,o,r,c,s)},unmask(t,n){t.length<32?o(t,n):e.unmask(t,n)},concat:t}}catch(r){module.exports={concat:t,mask:n,unmask:o}}
},{}],"ItL/":[function(require,module,exports) {
"use strict";module.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}};
},{}],"Z8cT":[function(require,module,exports) {
"use strict";const e=require("async-limiter"),t=require("zlib"),i=require("./buffer-util"),s=require("./constants"),n=Buffer.from([0,0,255,255]),o=Buffer.from([0]),r=Symbol("permessage-deflate"),a=Symbol("write-in-progress"),l=Symbol("pending-close"),_=Symbol("total-length"),h=Symbol("callback"),c=Symbol("buffers"),f=Symbol("error");let d;class w{constructor(t,i,s){if(this._maxPayload=0|s,this._options=t||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!i,this._deflate=null,this._inflate=null,this.params=null,!d){const t=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;d=new e({concurrency:t})}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){this._inflate&&(this._inflate[a]?this._inflate[l]=!0:(this._inflate.close(),this._inflate=null)),this._deflate&&(this._deflate[a]?this._deflate[l]=!0:(this._deflate.close(),this._deflate=null))}acceptAsServer(e){const t=this._options,i=e.find(e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits));if(!i)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(i.server_no_context_takeover=!0),t.clientNoContextTakeover&&(i.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(i.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?i.client_max_window_bits=t.clientMaxWindowBits:!0!==i.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete i.client_max_window_bits,i}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{var i=e[t];if(i.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(i=i[0],"client_max_window_bits"===t){if(!0!==i){const e=+i;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${i}`);i=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${i}`)}else if("server_max_window_bits"===t){const e=+i;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${i}`);i=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==i)throw new TypeError(`Invalid value for parameter "${t}": ${i}`)}e[t]=i})}),e}decompress(e,t,i){d.push(s=>{this._decompress(e,t,(e,t)=>{s(),i(e,t)})})}compress(e,t,i){d.push(s=>{this._compress(e,t,(e,t)=>{s(),i(e,t)})})}_decompress(e,s,o){const d=this._isServer?"client":"server";if(!this._inflate){const e=`${d}_max_window_bits`,i="number"!=typeof this.params[e]?t.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=t.createInflateRaw(Object.assign({},this._options.zlibInflateOptions,{windowBits:i})),this._inflate[r]=this,this._inflate[_]=0,this._inflate[c]=[],this._inflate.on("error",v),this._inflate.on("data",p)}this._inflate[h]=o,this._inflate[a]=!0,this._inflate.write(e),s&&this._inflate.write(n),this._inflate.flush(()=>{const e=this._inflate[f];if(e)return this._inflate.close(),this._inflate=null,void o(e);const t=i.concat(this._inflate[c],this._inflate[_]);s&&this.params[`${d}_no_context_takeover`]||this._inflate[l]?(this._inflate.close(),this._inflate=null):(this._inflate[a]=!1,this._inflate[_]=0,this._inflate[c]=[]),o(null,t)})}_compress(e,s,n){if(!e||0===e.length)return void process.nextTick(n,null,o);const r=this._isServer?"server":"client";if(!this._deflate){const e=`${r}_max_window_bits`,i="number"!=typeof this.params[e]?t.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=t.createDeflateRaw(Object.assign({memLevel:this._options.memLevel,level:this._options.level},this._options.zlibDeflateOptions,{windowBits:i})),this._deflate[_]=0,this._deflate[c]=[],this._deflate.on("data",m)}this._deflate[a]=!0,this._deflate.write(e),this._deflate.flush(t.Z_SYNC_FLUSH,()=>{var e=i.concat(this._deflate[c],this._deflate[_]);s&&(e=e.slice(0,e.length-4)),s&&this.params[`${r}_no_context_takeover`]||this._deflate[l]?(this._deflate.close(),this._deflate=null):(this._deflate[a]=!1,this._deflate[_]=0,this._deflate[c]=[]),n(null,e)})}}function m(e){this[c].push(e),this[_]+=e.length}function p(e){this[_]+=e.length,this[r]._maxPayload<1||this[_]<=this[r]._maxPayload?this[c].push(e):(this[f]=new RangeError("Max payload size exceeded"),this[f][s.kStatusCode]=1009,this.removeListener("data",p),this.reset())}function v(e){this[r]._inflate=null,e[s.kStatusCode]=1007,this[h](e)}module.exports=w;
},{"async-limiter":"TMkh","./buffer-util":"FFSq","./constants":"ItL/"}],"6W3N":[function(require,module,exports) {
"use strict";class s{constructor(s,e){this.target=e,this.type=s}}class e extends s{constructor(s,e){super("message",e),this.data=s}}class t extends s{constructor(s,e,t){super("close",t),this.wasClean=t._closeFrameReceived&&t._closeFrameSent,this.reason=e,this.code=s}}class n extends s{constructor(s){super("open",s)}}class r extends s{constructor(s,e){super("error",e),this.message=s.message,this.error=s}}const i={addEventListener(s,i){function o(s){i.call(this,new e(s,this))}function c(s,e){i.call(this,new t(s,e,this))}function l(s){i.call(this,new r(s,this))}function h(){i.call(this,new n(this))}"function"==typeof i&&("message"===s?(o._listener=i,this.on(s,o)):"close"===s?(c._listener=i,this.on(s,c)):"error"===s?(l._listener=i,this.on(s,l)):"open"===s?(h._listener=i,this.on(s,h)):this.on(s,i))},removeEventListener(s,e){const t=this.listeners(s);for(var n=0;n<t.length;n++)t[n]!==e&&t[n]._listener!==e||this.removeListener(s,t[n])}};module.exports=i;
},{}],"sR4p":[function(require,module,exports) {
"use strict";const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function r(e,r,t){Object.prototype.hasOwnProperty.call(e,r)?e[r].push(t):e[r]=[t]}function t(t){const n={};if(void 0===t||""===t)return n;for(var i,a,c={},o=!1,s=!1,f=!1,d=-1,x=-1,l=0;l<t.length;l++){const p=t.charCodeAt(l);if(void 0===i)if(-1===x&&1===e[p])-1===d&&(d=l);else if(32===p||9===p)-1===x&&-1!==d&&(x=l);else{if(59!==p&&44!==p)throw new SyntaxError(`Unexpected character at index ${l}`);{if(-1===d)throw new SyntaxError(`Unexpected character at index ${l}`);-1===x&&(x=l);const e=t.slice(d,x);44===p?(r(n,e,c),c={}):i=e,d=x=-1}}else if(void 0===a)if(-1===x&&1===e[p])-1===d&&(d=l);else if(32===p||9===p)-1===x&&-1!==d&&(x=l);else if(59===p||44===p){if(-1===d)throw new SyntaxError(`Unexpected character at index ${l}`);-1===x&&(x=l),r(c,t.slice(d,x),!0),44===p&&(r(n,i,c),c={},i=void 0),d=x=-1}else{if(61!==p||-1===d||-1!==x)throw new SyntaxError(`Unexpected character at index ${l}`);a=t.slice(d,l),d=x=-1}else if(s){if(1!==e[p])throw new SyntaxError(`Unexpected character at index ${l}`);-1===d?d=l:o||(o=!0),s=!1}else if(f)if(1===e[p])-1===d&&(d=l);else if(34===p&&-1!==d)f=!1,x=l;else{if(92!==p)throw new SyntaxError(`Unexpected character at index ${l}`);s=!0}else if(34===p&&61===t.charCodeAt(l-1))f=!0;else if(-1===x&&1===e[p])-1===d&&(d=l);else if(-1===d||32!==p&&9!==p){if(59!==p&&44!==p)throw new SyntaxError(`Unexpected character at index ${l}`);if(-1===d)throw new SyntaxError(`Unexpected character at index ${l}`);-1===x&&(x=l);var h=t.slice(d,x);o&&(h=h.replace(/\\/g,""),o=!1),r(c,a,h),44===p&&(r(n,i,c),c={},i=void 0),a=void 0,d=x=-1}else-1===x&&(x=l)}if(-1===d||f)throw new SyntaxError("Unexpected end of input");-1===x&&(x=l);const p=t.slice(d,x);return void 0===i?r(n,p,{}):(void 0===a?r(c,p,!0):r(c,a,o?p.replace(/\\/g,""):p),r(n,i,c)),n}function n(e){return Object.keys(e).map(r=>{var t=e[r];return Array.isArray(t)||(t=[t]),t.map(e=>[r].concat(Object.keys(e).map(r=>{var t=e[r];return Array.isArray(t)||(t=[t]),t.map(e=>!0===e?r:`${r}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")}module.exports={format:n,parse:t};
},{}],"VhmJ":[function(require,module,exports) {
"use strict";try{const i=require("utf-8-validate");exports.isValidUTF8="object"==typeof i?i.Validation.isValidUTF8:i}catch(t){exports.isValidUTF8=(()=>!0)}exports.isValidStatusCode=(t=>t>=1e3&&t<=1013&&1004!==t&&1005!==t&&1006!==t||t>=3e3&&t<=4999);
},{}],"cG8H":[function(require,module,exports) {
"use strict";const t=require("stream"),e=require("./permessage-deflate"),s=require("./buffer-util"),i=require("./validation"),h=require("./constants"),o=0,a=1,r=2,n=3,_=4,d=5;class f extends t.Writable{constructor(t,e,s){super(),this._binaryType=t||h.BINARY_TYPES[0],this[h.kWebSocket]=void 0,this._extensions=e||{},this._maxPayload=0|s,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=o,this._loop=!1}_write(t,e,s){if(8===this._opcode)return s();this._bufferedBytes+=t.length,this._buffers.push(t),this.startLoop(s)}consume(t){if(this._bufferedBytes-=t,t===this._buffers[0].length)return this._buffers.shift();if(t<this._buffers[0].length){const e=this._buffers[0];return this._buffers[0]=e.slice(t),e.slice(0,t)}const e=Buffer.allocUnsafe(t);do{const s=this._buffers[0];t>=s.length?this._buffers.shift().copy(e,e.length-t):(s.copy(e,e.length-t,0,t),this._buffers[0]=s.slice(t)),t-=s.length}while(t>0);return e}startLoop(t){var e;this._loop=!0;do{switch(this._state){case o:e=this.getInfo();break;case a:e=this.getPayloadLength16();break;case r:e=this.getPayloadLength64();break;case n:this.getMask();break;case _:e=this.getData(t);break;default:return void(this._loop=!1)}}while(this._loop);t(e)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const t=this.consume(2);if(0!=(48&t[0]))return this._loop=!1,l(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const s=64==(64&t[0]);if(s&&!this._extensions[e.extensionName])return this._loop=!1,l(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=128==(128&t[0]),this._opcode=15&t[0],this._payloadLength=127&t[1],0===this._opcode){if(s)return this._loop=!1,l(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,l(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,l(RangeError,`invalid opcode ${this._opcode}`,!0,1002);this._compressed=s}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,l(RangeError,`invalid opcode ${this._opcode}`,!0,1002);if(!this._fin)return this._loop=!1,l(RangeError,"FIN must be set",!0,1002);if(s)return this._loop=!1,l(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,l(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&t[1]),126===this._payloadLength)this._state=a;else{if(127!==this._payloadLength)return this.haveLength();this._state=r}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const t=this.consume(8),e=t.readUInt32BE(0);return e>Math.pow(2,21)-1?(this._loop=!1,l(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=e*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,l(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=n:this._state=_}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=_)}getData(t){var e=h.EMPTY_BUFFER;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);e=this.consume(this._payloadLength),this._masked&&s.unmask(e,this._mask)}return this._opcode>7?this.controlMessage(e):this._compressed?(this._state=d,void this.decompress(e,t)):(e.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(e)),this.dataMessage())}decompress(t,s){this._extensions[e.extensionName].decompress(t,this._fin,(t,e)=>{if(t)return s(t);if(e.length){if(this._messageLength+=e.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return s(l(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(e)}const i=this.dataMessage();if(i)return s(i);this.startLoop(s)})}dataMessage(){if(this._fin){const e=this._messageLength,s=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){var t;t="nodebuffer"===this._binaryType?g(s,e):"arraybuffer"===this._binaryType?u(g(s,e)):s,this.emit("message",t)}else{const t=g(s,e);if(!i.isValidUTF8(t))return this._loop=!1,l(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",t.toString())}}this._state=o}controlMessage(t){if(8!==this._opcode)9===this._opcode?this.emit("ping",t):this.emit("pong",t),this._state=o;else if(this._loop=!1,0===t.length)this.emit("conclude",1005,""),this.end();else{if(1===t.length)return l(RangeError,"invalid payload length 1",!0,1002);{const e=t.readUInt16BE(0);if(!i.isValidStatusCode(e))return l(RangeError,`invalid status code ${e}`,!0,1002);const s=t.slice(2);if(!i.isValidUTF8(s))return l(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",e,s.toString()),this.end()}}}}function l(t,e,s,i){const o=new t(s?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(o,l),o[h.kStatusCode]=i,o}function g(t,e){return 1===t.length?t[0]:t.length>1?s.concat(t,e):h.EMPTY_BUFFER}function u(t){return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}module.exports=f;
},{"./permessage-deflate":"Z8cT","./buffer-util":"FFSq","./validation":"VhmJ","./constants":"ItL/"}],"Ge+G":[function(require,module,exports) {
"use strict";const e=require("crypto"),t=require("./permessage-deflate"),s=require("./buffer-util"),r=require("./validation"),i=require("./constants");class n{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(t,r){const i=t.length<1024||r.mask&&r.readOnly;var n=r.mask?6:2,f=t.length;t.length>=65536?(n+=8,f=127):t.length>125&&(n+=2,f=126);const o=Buffer.allocUnsafe(i?t.length+n:n);if(o[0]=r.fin?128|r.opcode:r.opcode,r.rsv1&&(o[0]|=64),126===f?o.writeUInt16BE(t.length,2):127===f&&(o.writeUInt32BE(0,2),o.writeUInt32BE(t.length,6)),!r.mask)return o[1]=f,i?(t.copy(o,n),[o]):[o,t];const a=e.randomBytes(4);return o[1]=128|f,o[n-4]=a[0],o[n-3]=a[1],o[n-2]=a[2],o[n-1]=a[3],i?(s.mask(t,a,o,n,t.length),[o]):(s.mask(t,a,t,0,t.length),[o,t])}close(e,t,s,n){var f;if(void 0===e)f=i.EMPTY_BUFFER;else{if("number"!=typeof e||!r.isValidStatusCode(e))throw new TypeError("First argument must be a valid error code number");void 0===t||""===t?(f=Buffer.allocUnsafe(2)).writeUInt16BE(e,0):((f=Buffer.allocUnsafe(2+Buffer.byteLength(t))).writeUInt16BE(e,0),f.write(t,2))}this._deflating?this.enqueue([this.doClose,f,s,n]):this.doClose(f,s,n)}doClose(e,t,s){this.sendFrame(n.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),s)}ping(e,t,s){var r=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=f(e):(e=Buffer.from(e),r=!1)),this._deflating?this.enqueue([this.doPing,e,t,r,s]):this.doPing(e,t,r,s)}doPing(e,t,s,r){this.sendFrame(n.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:s}),r)}pong(e,t,s){var r=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=f(e):(e=Buffer.from(e),r=!1)),this._deflating?this.enqueue([this.doPong,e,t,r,s]):this.doPong(e,t,r,s)}doPong(e,t,s,r){this.sendFrame(n.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:s}),r)}send(e,s,r){var i=s.binary?2:1,o=s.compress,a=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=f(e):(e=Buffer.from(e),a=!1));const h=this._extensions[t.extensionName];if(this._firstFragment?(this._firstFragment=!1,o&&h&&(o=e.length>=h._threshold),this._compress=o):(o=!1,i=0),s.fin&&(this._firstFragment=!0),h){const t={fin:s.fin,rsv1:o,opcode:i,mask:s.mask,readOnly:a};this._deflating?this.enqueue([this.dispatch,e,this._compress,t,r]):this.dispatch(e,this._compress,t,r)}else this.sendFrame(n.frame(e,{fin:s.fin,rsv1:!1,opcode:i,mask:s.mask,readOnly:a}),r)}dispatch(e,s,r,i){if(!s)return void this.sendFrame(n.frame(e,r),i);const f=this._extensions[t.extensionName];this._deflating=!0,f.compress(e,r.fin,(e,t)=>{r.readOnly=!1,this.sendFrame(n.frame(t,r),i),this._deflating=!1,this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,e[0].apply(this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.write(e[0]),this._socket.write(e[1],t)):this._socket.write(e[0],t)}}function f(e){const t=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength?t.slice(e.byteOffset,e.byteOffset+e.byteLength):t}module.exports=n;
},{"./permessage-deflate":"Z8cT","./buffer-util":"FFSq","./validation":"VhmJ","./constants":"ItL/"}],"NDOi":[function(require,module,exports) {
"use strict";const e=require("events"),t=require("crypto"),s=require("https"),r=require("http"),o=require("net"),i=require("tls"),n=require("url"),a=require("./permessage-deflate"),c=require("./event-target"),h=require("./extension"),d=require("./constants"),l=require("./receiver"),u=require("./sender"),p=["CONNECTING","OPEN","CLOSING","CLOSED"],_=d.kWebSocket,S=[8,13],m=3e4;class v extends e{constructor(e,t,s){super(),this.readyState=v.CONNECTING,this.protocol="",this._binaryType=d.BINARY_TYPES[0],this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._closeCode=1006,this._extensions={},this._isServer=!0,this._receiver=null,this._sender=null,this._socket=null,null!==e&&(Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(s=t,t=void 0),f.call(this,e,t,s))}get CONNECTING(){return v.CONNECTING}get CLOSING(){return v.CLOSING}get CLOSED(){return v.CLOSED}get OPEN(){return v.OPEN}get binaryType(){return this._binaryType}set binaryType(e){d.BINARY_TYPES.indexOf(e)<0||(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?(this._socket.bufferSize||0)+this._sender._bufferedBytes:0}get extensions(){return Object.keys(this._extensions).join()}setSocket(e,t,s){const r=new l(this._binaryType,this._extensions,s);this._sender=new u(e,this._extensions),this._receiver=r,this._socket=e,r[_]=this,e[_]=this,r.on("conclude",k),r.on("drain",N),r.on("error",C),r.on("message",E),r.on("ping",L),r.on("pong",w),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",T),e.on("data",x),e.on("end",I),e.on("error",P),this.readyState=v.OPEN,this.emit("open")}emitClose(){this.readyState=v.CLOSED,this._socket?(this._extensions[a.extensionName]&&this._extensions[a.extensionName].cleanup(),this._receiver.removeAllListeners(),this.emit("close",this._closeCode,this._closeMessage)):this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==v.CLOSED){if(this.readyState===v.CONNECTING){const e="WebSocket was closed before the connection was established";return g(this,this._req,e)}this.readyState!==v.CLOSING?(this.readyState=v.CLOSING,this._sender.close(e,t,!this._isServer,e=>{e||(this._closeFrameSent=!0,this._socket.writable&&(this._closeFrameReceived&&this._socket.end(),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),m)))})):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(e,t,s){if("function"==typeof e?(s=e,e=t=void 0):"function"==typeof t&&(s=t,t=void 0),this.readyState!==v.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${p[this.readyState]})`);if(s)return s(e);throw e}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.ping(e||d.EMPTY_BUFFER,t,s)}pong(e,t,s){if("function"==typeof e?(s=e,e=t=void 0):"function"==typeof t&&(s=t,t=void 0),this.readyState!==v.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${p[this.readyState]})`);if(s)return s(e);throw e}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.pong(e||d.EMPTY_BUFFER,t,s)}send(e,t,s){if("function"==typeof t&&(s=t,t={}),this.readyState!==v.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${p[this.readyState]})`);if(s)return s(e);throw e}"number"==typeof e&&(e=e.toString());const r=Object.assign({binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0},t);this._extensions[a.extensionName]||(r.compress=!1),this._sender.send(e||d.EMPTY_BUFFER,r,s)}terminate(){if(this.readyState!==v.CLOSED){if(this.readyState===v.CONNECTING){const e="WebSocket was closed before the connection was established";return g(this,this._req,e)}this._socket&&(this.readyState=v.CLOSING,this._socket.destroy())}}}function f(e,o,i){if(i=Object.assign({protocolVersion:S[1],perMessageDeflate:!0},i,{createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,auth:void 0,host:void 0,path:void 0,port:void 0}),-1===S.indexOf(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} `+`(supported versions: ${S.join(", ")})`);var c;this._isServer=!1,"object"==typeof e&&void 0!==e.href?(c=e,this.url=e.href):(c=n.parse(e),this.url=e);const l="ws+unix:"===c.protocol;if(!(c.host||l&&c.pathname))throw new Error(`Invalid URL: ${this.url}`);const u="wss:"===c.protocol||"https:"===c.protocol,p=t.randomBytes(16).toString("base64"),_=u?s:r,m=c.search?`${c.pathname||"/"}${c.search}`:c.pathname||"/";var f;if(i.createConnection=u?b:y,i.port=c.port||(u?443:80),i.host=c.hostname.startsWith("[")?c.hostname.slice(1,-1):c.hostname,i.headers=Object.assign({"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":p,Connection:"Upgrade",Upgrade:"websocket"},i.headers),i.path=m,i.perMessageDeflate&&(f=new a(!0!==i.perMessageDeflate?i.perMessageDeflate:{},!1),i.headers["Sec-WebSocket-Extensions"]=h.format({[a.extensionName]:f.offer()})),o&&(i.headers["Sec-WebSocket-Protocol"]=o),i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),c.auth?i.auth=c.auth:(c.username||c.password)&&(i.auth=`${c.username}:${c.password}`),l){const e=m.split(":");null==i.agent&&process.versions.modules<57?i._socketPath=e[0]:i.socketPath=e[0],i.path=e[1]}var k=this._req=_.get(i);i.handshakeTimeout&&k.setTimeout(i.handshakeTimeout,()=>g(this,k,"Opening handshake has timed out")),k.on("error",e=>{this._req.aborted||(k=this._req=null,this.readyState=v.CLOSING,this.emit("error",e),this.emitClose())}),k.on("response",e=>{this.emit("unexpected-response",k,e)||g(this,k,`Unexpected server response: ${e.statusCode}`)}),k.on("upgrade",(e,s,r)=>{if(this.emit("upgrade",e),this.readyState!==v.CONNECTING)return;k=this._req=null;const i=t.createHash("sha1").update(p+d.GUID,"binary").digest("base64");if(e.headers["sec-websocket-accept"]!==i)return void g(this,s,"Invalid Sec-WebSocket-Accept header");const n=e.headers["sec-websocket-protocol"],c=(o||"").split(/, */);var l;if(!o&&n?l="Server sent a subprotocol but none was requested":o&&!n?l="Server sent no subprotocol":n&&-1===c.indexOf(n)&&(l="Server sent an invalid subprotocol"),l)g(this,s,l);else{if(n&&(this.protocol=n),f)try{const t=h.parse(e.headers["sec-websocket-extensions"]);t[a.extensionName]&&(f.accept(t[a.extensionName]),this._extensions[a.extensionName]=f)}catch(u){return void g(this,s,"Invalid Sec-WebSocket-Extensions header")}this.setSocket(s,r,0)}})}function y(e){return e.path=e.socketPath||e._socketPath||void 0,o.connect(e)}function b(e){return e.path=e.socketPath||e._socketPath||void 0,e.servername=e.servername||e.host,i.connect(e)}function g(e,t,s){e.readyState=v.CLOSING;const r=new Error(s);Error.captureStackTrace(r,g),t.setHeader?(t.abort(),t.once("abort",e.emitClose.bind(e)),e.emit("error",r)):(t.destroy(r),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function k(e,t){const s=this[_];s._socket.removeListener("data",x),s._socket.resume(),s._closeFrameReceived=!0,s._closeMessage=t,s._closeCode=e,1005===e?s.close():s.close(e,t)}function N(){this[_]._socket.resume()}function C(e){const t=this[_];t._socket.removeListener("data",x),t.readyState=v.CLOSING,t._closeCode=e[d.kStatusCode],t.emit("error",e),t._socket.destroy()}function O(){this[_].emitClose()}function E(e){this[_].emit("message",e)}function L(e){const t=this[_];t.pong(e,!t._isServer,d.NOOP),t.emit("ping",e)}function w(e){this[_].emit("pong",e)}function T(){const e=this[_];this.removeListener("close",T),this.removeListener("end",I),e.readyState=v.CLOSING,e._socket.read(),e._receiver.end(),this.removeListener("data",x),this[_]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",O),e._receiver.on("finish",O))}function x(e){this[_]._receiver.write(e)||this.pause()}function I(){const e=this[_];e.readyState=v.CLOSING,e._receiver.end(),this.end()}function P(){const e=this[_];this.removeListener("error",P),this.on("error",d.NOOP),e&&(e.readyState=v.CLOSING,this.destroy())}p.forEach((e,t)=>{v[p[t]]=t}),["open","error","close","message"].forEach(e=>{Object.defineProperty(v.prototype,`on${e}`,{get(){const t=this.listeners(e);for(var s=0;s<t.length;s++)if(t[s]._listener)return t[s]._listener},set(t){const s=this.listeners(e);for(var r=0;r<s.length;r++)s[r]._listener&&this.removeListener(e,s[r]);this.addEventListener(e,t)}})}),v.prototype.addEventListener=c.addEventListener,v.prototype.removeEventListener=c.removeEventListener,module.exports=v;
},{"./permessage-deflate":"Z8cT","./event-target":"6W3N","./extension":"sR4p","./constants":"ItL/","./receiver":"cG8H","./sender":"Ge+G"}],"QfaL":[function(require,module,exports) {
"use strict";const e=require("events"),t=require("crypto"),r=require("http"),s=require("url"),n=require("./permessage-deflate"),o=require("./extension"),i=require("./constants"),c=require("./websocket");class a extends e{constructor(e,t){if(super(),null==(e=Object.assign({maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null},e)).port&&!e.server&&!e.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');null!=e.port?(this._server=r.createServer((e,t)=>{const s=r.STATUS_CODES[426];t.writeHead(426,{"Content-Length":s.length,"Content-Type":"text/plain"}),t.end(s)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server&&(this._removeListeners=l(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(e,t,r)=>{this.handleUpgrade(e,t,r,t=>{this.emit("connection",t,e)})}})),!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this.clients)for(const r of this.clients)r.terminate();const t=this._server;if(t&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port))return t.close(e);e&&e()}shouldHandle(e){return!this.options.path||s.parse(e.url).pathname===this.options.path}handleUpgrade(e,t,r,s){t.on("error",h);const i=+e.headers["sec-websocket-version"],c={};if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!e.headers["sec-websocket-key"]||8!==i&&13!==i||!this.shouldHandle(e))return p(t,400);if(this.options.perMessageDeflate){const r=new n(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const s=o.parse(e.headers["sec-websocket-extensions"]);s[n.extensionName]&&(r.accept(s[n.extensionName]),c[n.extensionName]=r)}catch(a){return p(t,400)}}if(this.options.verifyClient){const n={origin:e.headers[`${8===i?"sec-websocket-origin":"origin"}`],secure:!(!e.connection.authorized&&!e.connection.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(n,(n,o,i,a)=>{if(!n)return p(t,o||401,i,a);this.completeUpgrade(c,e,t,r,s)});if(!this.options.verifyClient(n))return p(t,401)}this.completeUpgrade(c,e,t,r,s)}completeUpgrade(e,r,s,a,l){if(!s.readable||!s.writable)return s.destroy();const p=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${t.createHash("sha1").update(r.headers["sec-websocket-key"]+i.GUID,"binary").digest("base64")}`],d=new c(null);var u=r.headers["sec-websocket-protocol"];if(u&&(u=u.trim().split(/ *, */),(u=this.options.handleProtocols?this.options.handleProtocols(u,r):u[0])&&(p.push(`Sec-WebSocket-Protocol: ${u}`),d.protocol=u)),e[n.extensionName]){const t=e[n.extensionName].params,r=o.format({[n.extensionName]:[t]});p.push(`Sec-WebSocket-Extensions: ${r}`),d._extensions=e}this.emit("headers",p,r),s.write(p.concat("\r\n").join("\r\n")),s.removeListener("error",h),d.setSocket(s,a,this.options.maxPayload),this.clients&&(this.clients.add(d),d.on("close",()=>this.clients.delete(d))),l(d)}}function l(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}function h(){this.destroy()}function p(e,t,s,n){e.writable&&(s=s||r.STATUS_CODES[t],n=Object.assign({Connection:"close","Content-type":"text/html","Content-Length":Buffer.byteLength(s)},n),e.write(`HTTP/1.1 ${t} ${r.STATUS_CODES[t]}\r\n`+Object.keys(n).map(e=>`${e}: ${n[e]}`).join("\r\n")+"\r\n\r\n"+s)),e.removeListener("error",h),e.destroy()}module.exports=a;
},{"./permessage-deflate":"Z8cT","./extension":"sR4p","./constants":"ItL/","./websocket":"NDOi"}],"fY40":[function(require,module,exports) {
"use strict";const e=require("./lib/websocket");e.Server=require("./lib/websocket-server"),e.Receiver=require("./lib/receiver"),e.Sender=require("./lib/sender"),module.exports=e;
},{"./lib/websocket":"NDOi","./lib/websocket-server":"QfaL","./lib/receiver":"cG8H","./lib/sender":"Ge+G"}],"4Bm0":[function(require,module,exports) {
"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};
},{}],"+ZRW":[function(require,module,exports) {
try{var r=require("util");if("function"!=typeof r.inherits)throw"";module.exports=r.inherits}catch(e){module.exports=require("./inherits_browser.js")}
},{"./inherits_browser.js":"4Bm0"}],"38Wu":[function(require,module,exports) {
var r=require("buffer"),e=r.Buffer;function n(r,e){for(var n in r)e[n]=r[n]}function o(r,n,o){return e(r,n,o)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?module.exports=r:(n(r,exports),exports.Buffer=o),n(e,o),o.from=function(r,n,o){if("number"==typeof r)throw new TypeError("Argument must not be a number");return e(r,n,o)},o.alloc=function(r,n,o){if("number"!=typeof r)throw new TypeError("Argument must be a number");var f=e(r);return void 0!==n?"string"==typeof o?f.fill(n,o):f.fill(n):f.fill(0),f},o.allocUnsafe=function(r){if("number"!=typeof r)throw new TypeError("Argument must be a number");return e(r)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)};
},{}],"VHby":[function(require,module,exports) {
var t=require("safe-buffer").Buffer;function i(i,e){this._block=t.alloc(i),this._finalSize=e,this._blockSize=i,this._len=0}i.prototype.update=function(i,e){"string"==typeof i&&(e=e||"utf8",i=t.from(i,e));for(var s=this._block,o=this._blockSize,l=i.length,h=this._len,r=0;r<l;){for(var _=h%o,n=Math.min(l-r,o-_),c=0;c<n;c++)s[_+c]=i[r+c];r+=n,(h+=n)%o==0&&this._update(s)}return this._len+=l,this},i.prototype.digest=function(t){var i=this._len%this._blockSize;this._block[i]=128,this._block.fill(0,i+1),i>=this._finalSize&&(this._update(this._block),this._block.fill(0));var e=8*this._len;if(e<=4294967295)this._block.writeUInt32BE(e,this._blockSize-4);else{var s=(4294967295&e)>>>0,o=(e-s)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(s,this._blockSize-4)}this._update(this._block);var l=this._hash();return t?l.toString(t):l},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},module.exports=i;
},{"safe-buffer":"38Wu"}],"IUSb":[function(require,module,exports) {
var t=require("inherits"),i=require("./hash"),h=require("safe-buffer").Buffer,s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],r=new Array(64);function _(){this.init(),this._w=r,i.call(this,64,56)}function n(t,i,h){return h^t&(i^h)}function e(t,i,h){return t&i|h&(t|i)}function u(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function f(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function o(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function a(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}t(_,i),_.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},_.prototype._update=function(t){for(var i=this._w,h=0|this._a,r=0|this._b,_=0|this._c,c=0|this._d,w=0|this._e,B=0|this._f,E=0|this._g,I=0|this._h,d=0;d<16;++d)i[d]=t.readInt32BE(4*d);for(;d<64;++d)i[d]=a(i[d-2])+i[d-7]+o(i[d-15])+i[d-16]|0;for(var p=0;p<64;++p){var b=I+f(w)+n(w,B,E)+s[p]+i[p]|0,g=u(h)+e(h,r,_)|0;I=E,E=B,B=w,w=c+b|0,c=_,_=r,r=h,h=b+g|0}this._a=h+this._a|0,this._b=r+this._b|0,this._c=_+this._c|0,this._d=c+this._d|0,this._e=w+this._e|0,this._f=B+this._f|0,this._g=E+this._g|0,this._h=I+this._h|0},_.prototype._hash=function(){var t=h.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},module.exports=_;
},{"inherits":"+ZRW","./hash":"VHby","safe-buffer":"38Wu"}],"PNzH":[function(require,module,exports) {
const e=require("sha.js/sha256");module.exports=function(t="",s="",a){const u=(new e).update(a).update(t).digest("base64");return(new e).update(u).update(s).digest("base64")};
},{"sha.js/sha256":"IUSb"}],"Ph4G":[function(require,module,exports) {
module.exports={NOT_CONNECTED:{status:"error",description:"There is no Socket connection available."},CONNECTION_ERROR:{status:"error",description:"Connection error."},SOCKET_EXCEPTION:{status:"error",description:"An exception occurred from the underlying WebSocket."},AUTH_NOT_REQUIRED:{status:"ok",description:"Authentication is not required."},REQUEST_TYPE_NOT_SPECIFIED:{status:"error",description:"A Request Type was not specified."},init(){for(const t in this)({}).hasOwnProperty.call(this,t)&&(this[t].code=t,"error"!==this[t].status||this[t].error||(this[t].error=this[t].description));return delete this.init,this}}.init();
},{}],"o/U+":[function(require,module,exports) {
var s=1e3,e=60*s,r=60*e,a=24*r,n=7*a,c=365.25*a;function t(t){if(!((t=String(t)).length>100)){var u=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(u){var o=parseFloat(u[1]);switch((u[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return o*c;case"weeks":case"week":case"w":return o*n;case"days":case"day":case"d":return o*a;case"hours":case"hour":case"hrs":case"hr":case"h":return o*r;case"minutes":case"minute":case"mins":case"min":case"m":return o*e;case"seconds":case"second":case"secs":case"sec":case"s":return o*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function u(n){var c=Math.abs(n);return c>=a?Math.round(n/a)+"d":c>=r?Math.round(n/r)+"h":c>=e?Math.round(n/e)+"m":c>=s?Math.round(n/s)+"s":n+"ms"}function o(n){var c=Math.abs(n);return c>=a?i(n,c,a,"day"):c>=r?i(n,c,r,"hour"):c>=e?i(n,c,e,"minute"):c>=s?i(n,c,s,"second"):n+" ms"}function i(s,e,r,a){var n=e>=1.5*r;return Math.round(s/r)+" "+a+(n?"s":"")}module.exports=function(s,e){e=e||{};var r=typeof s;if("string"===r&&s.length>0)return t(s);if("number"===r&&!1===isNaN(s))return e.long?o(s):u(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))};
},{}],"Kest":[function(require,module,exports) {
function e(e){function n(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]}function t(e){let o;function i(...e){if(!i.enabled)return;const n=i,s=Number(new Date),r=s-(o||s);n.diff=r,n.prev=o,n.curr=s,o=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(s,r)=>{if("%%"===s)return s;a++;const o=t.formatters[r];if("function"==typeof o){const t=e[a];s=o.call(n,t),e.splice(a,1),a--}return s}),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=n(e),i.destroy=s,i.extend=r,"function"==typeof t.init&&t.init(i),t.instances.push(i),i}function s(){const e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}function r(e,n){const s=t(this.namespace+(void 0===n?":":n)+e);return s.log=this.log,s}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.names=[],t.skips=[];const s=("string"==typeof e?e:"").split(/[\s,]+/),r=s.length;for(n=0;n<r;n++)s[n]&&("-"===(e=s[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){const e=t.instances[n];e.enabled=t.enabled(e.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,s;for(n=0,s=t.skips.length;n<s;n++)if(t.skips[n].test(e))return!1;for(n=0,s=t.names.length;n<s;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=require("ms"),Object.keys(e).forEach(n=>{t[n]=e[n]}),t.instances=[],t.names=[],t.skips=[],t.formatters={},t.selectColor=n,t.enable(t.load()),t}module.exports=e;
},{"ms":"o/U+"}],"jcLW":[function(require,module,exports) {
function e(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function o(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+module.exports.humanize(this.diff),!this.useColors)return;const o="color: "+this.color;e.splice(1,0,o,"color: inherit");let C=0,t=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(C++,"%c"===e&&(t=C))}),e.splice(t,0,o)}function C(...e){return"object"==typeof console&&console.log&&console.log(...e)}function t(e){try{e?exports.storage.setItem("debug",e):exports.storage.removeItem("debug")}catch(o){}}function n(){let e;try{e=exports.storage.getItem("debug")}catch(o){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}function r(){try{return localStorage}catch(e){}}exports.log=C,exports.formatArgs=o,exports.save=t,exports.load=n,exports.useColors=e,exports.storage=r(),exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],module.exports=require("./common")(exports);const{formatters:s}=module.exports;s.j=function(e){try{return JSON.stringify(e)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}};
},{"./common":"Kest"}],"IvCc":[function(require,module,exports) {
"use strict";module.exports=((t,e)=>{e=e||process.argv;const s=t.startsWith("-")?"":1===t.length?"-":"--",r=e.indexOf(s+t),n=e.indexOf("--");return-1!==r&&(-1===n||r<n)});
},{}],"DYmO":[function(require,module,exports) {
"use strict";const r=require("os"),e=require("has-flag"),o=process.env;let s;function t(r){return 0!==r&&{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function n(t){if(!1===s)return 0;if(e("color=16m")||e("color=full")||e("color=truecolor"))return 3;if(e("color=256"))return 2;if(t&&!t.isTTY&&!0!==s)return 0;const n=s?1:0;if("win32"===process.platform){const e=r.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(r=>r in o)||"codeship"===o.CI_NAME?1:n;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const r=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)?1:"COLORTERM"in o?1:(o.TERM,n)}function i(r){return t(n(r))}e("no-color")||e("no-colors")||e("color=false")?s=!1:(e("color")||e("colors")||e("color=true")||e("color=always"))&&(s=!0),"FORCE_COLOR"in o&&(s=0===o.FORCE_COLOR.length||0!==parseInt(o.FORCE_COLOR,10)),module.exports={supportsColor:i,stdout:i(process.stdout),stderr:i(process.stderr)};
},{"has-flag":"IvCc"}],"9WM/":[function(require,module,exports) {
const e=require("tty"),s=require("util");exports.init=c,exports.log=n,exports.formatArgs=o,exports.save=p,exports.load=i,exports.useColors=t,exports.colors=[6,2,3,4,5,1];try{const e=require("supports-color");e&&(e.stderr||e).level>=2&&(exports.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(l){}function t(){return"colors"in exports.inspectOpts?Boolean(exports.inspectOpts.colors):e.isatty(process.stderr.fd)}function o(e){const{namespace:s,useColors:t}=this;if(t){const t=this.color,o="[3"+(t<8?t:"8;5;"+t),r=`  ${o};1m${s} [0m`;e[0]=r+e[0].split("\n").join("\n"+r),e.push(o+"m+"+module.exports.humanize(this.diff)+"[0m")}else e[0]=r()+s+" "+e[0]}function r(){return exports.inspectOpts.hideDate?"":(new Date).toISOString()+" "}function n(...e){return process.stderr.write(s.format(...e)+"\n")}function p(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function i(){return process.env.DEBUG}function c(e){e.inspectOpts={};const s=Object.keys(exports.inspectOpts);for(let t=0;t<s.length;t++)e.inspectOpts[s[t]]=exports.inspectOpts[s[t]]}exports.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,s)=>{const t=s.substring(6).toLowerCase().replace(/_([a-z])/g,(e,s)=>s.toUpperCase());let o=process.env[s];return o=!!/^(yes|on|true|enabled)$/i.test(o)||!/^(no|off|false|disabled)$/i.test(o)&&("null"===o?null:Number(o)),e[t]=o,e},{}),module.exports=require("./common")(exports);const{formatters:u}=module.exports;u.o=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},u.O=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts)};
},{"supports-color":"DYmO","./common":"Kest"}],"8NLT":[function(require,module,exports) {
"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?module.exports=require("./browser.js"):module.exports=require("./node.js");
},{"./browser.js":"jcLW","./node.js":"9WM/"}],"p65S":[function(require,module,exports) {
module.exports=function(o,t,c){c&&c.stack?o(`${t}\n %O`,c.stack):o("object"==typeof c?`${t} %o`:`${t} %s`,c)};
},{}],"FKMh":[function(require,module,exports) {
module.exports=function(e){e=e||{};for(const n in e){if(!{}.hasOwnProperty.call(e,n))continue;e[n.replace(/-([a-z])/gi,(e,n)=>n.toUpperCase())]=e[n]}return e};
},{}],"Xw1f":[function(require,module,exports) {
const e=require("ws"),t=require("events"),s=require("./util/authenticationHashing"),i=require("./Status"),n=require("debug")("obs-websocket-js:Socket"),o=require("./util/logAmbiguousError"),c=require("./util/camelCaseKeys");class a extends t{constructor(){super(),this._connected=!1,this._socket=void 0;const e=this.emit;this.emit=function(...t){n("[emit] %s err: %o data: %o",...t),e.apply(this,t)}}async connect(e={}){const t=(e=e||{}).address||"localhost:4444";return this._connected&&this._socket.close(),new Promise(async(s,i)=>{try{await this._connect(t),await this._authenticate(e.password),s()}catch(c){this._socket.close(),this._connected=!1,o(n,"Connection failed:",c),i(c)}})}async _connect(t){return new Promise((s,a)=>{let r=!1;n("Attempting to connect to: %s",t),this._socket=new e("ws://"+t),this._socket.onerror=(e=>{if(r)return o(n,"Unknown Socket Error",e),void this.emit("error",e);r=!0,o(n,"Websocket Connection failed:",e),a(i.CONNECTION_ERROR)}),this._socket.onopen=(()=>{r||(this._connected=!0,r=!0,n("Connection opened: %s",t),this.emit("ConnectionOpened"),s())}),this._socket.onclose=(()=>{this._connected=!1,n("Connection closed: %s",t),this.emit("ConnectionClosed")}),this._socket.onmessage=(e=>{n("[OnMessage]: %o",e);const t=c(JSON.parse(e.data));let s,i;"error"===t.status?s=t:i=t,t.messageId?this.emit(`obs:internal:message:id-${t.messageId}`,s,i):t.updateType?this.emit(t.updateType,i):(o(n,"Unrecognized Socket Message:",t),this.emit("message",t))})})}async _authenticate(e=""){if(!this._connected)throw i.NOT_CONNECTED;const t=await this.send("GetAuthRequired");if(!t.authRequired)return n("Authentication not Required"),this.emit("AuthenticationSuccess"),i.AUTH_NOT_REQUIRED;try{await this.send("Authenticate",{auth:s(t.salt,t.challenge,e)})}catch(o){throw n("Authentication Failure %o",o),this.emit("AuthenticationFailure"),o}n("Authentication Success"),this.emit("AuthenticationSuccess")}disconnect(){n("Disconnect requested."),this._socket&&this._socket.close()}}module.exports=a;
},{"ws":"fY40","./util/authenticationHashing":"PNzH","./Status":"Ph4G","debug":"8NLT","./util/logAmbiguousError":"p65S","./util/camelCaseKeys":"FKMh"}],"J6JT":[function(require,module,exports) {
const e=require("./Socket"),s=require("./Status"),t=require("debug")("obs-websocket-js:Core");let n=0;function i(){return String(n++)}class o extends e{send(e,n={}){return n=n||{},new Promise((o,r)=>{const c=i();let d;if(e||(d=s.REQUEST_TYPE_NOT_SPECIFIED),this._connected||(d=s.NOT_CONNECTED),this.once(`obs:internal:message:id-${c}`,(e,s)=>{e?(t("[send:reject] %o",e),r(e)):(t("[send:resolve] %o",s),o(s))}),!d){n["request-type"]=e,n["message-id"]=c,t("[send] %s %s %o",c,e,n);try{this._socket.send(JSON.stringify(n))}catch(u){d=s.SOCKET_EXCEPTION}}d&&this.emit(`obs:internal:message:id-${c}`,d)})}sendCallback(e,s={},t){void 0===t&&"function"==typeof s&&(t=s,s={}),this.send(e,s).then((...e)=>{t(null,...e)}).catch(e=>{t(e)})}}module.exports=o;
},{"./Socket":"Xw1f","./Status":"Ph4G","debug":"8NLT"}],"omp6":[function(require,module,exports) {
module.exports=require("./OBSWebSocket.js");
},{"./OBSWebSocket.js":"J6JT"}],"A2T1":[function(require,module,exports) {
const e=require("obs-websocket-js"),t=new e;function o(e){$SD.on("com.elgato.template.action.willAppear",e=>n.onWillAppear(e)),$SD.on("com.elgato.template.action.keyUp",e=>n.onKeyUp(e)),$SD.on("com.elgato.template.action.sendToPlugin",e=>n.onSendToPlugin(e)),$SD.on("com.elgato.template.action.didReceiveSettings",e=>n.onDidReceiveSettings(e)),$SD.on("com.elgato.template.action.propertyInspectorDidAppear",e=>{console.log("%c%s","color: white; background: black; font-size: 13px;","[app.js]propertyInspectorDidAppear:")}),$SD.on("com.elgato.template.action.propertyInspectorDidDisappear",e=>{console.log("%c%s","color: white; background: red; font-size: 13px;","[app.js]propertyInspectorDidDisappear:")})}t.connect(),$SD.on("connected",e=>o(e));const n={settings:{},onDidReceiveSettings:function(e){console.log("%c%s","color: white; background: red; font-size: 15px;","[app.js]onDidReceiveSettings:"),this.settings=Utils.getProp(e,"payload.settings",{}),this.doSomeThing(this.settings,"onDidReceiveSettings","orange"),this.setTitle(e)},onWillAppear:function(e){console.log("You can cache your settings in 'onWillAppear'",e.payload.settings),this.settings=e.payload.settings,this.settings&&0!==Object.keys(this.settings).length||(this.settings.mynameinput="TEMPLATE"),this.setTitle(e)},onKeyUp:async function(e){this.doSomeThing(e,"onKeyUp","green"),console.log("onKeyUp",await t.getSourcesList(),t.getSourcesList())},onSendToPlugin:function(e){const t=Utils.getProp(e,"payload.sdpi_collection",{});t.value&&void 0!==t.value&&this.doSomeThing({[t.key]:t.value},"onSendToPlugin","fuchsia")},saveSettings:function(e,t){console.log("saveSettings:",e),t.hasOwnProperty("key")&&""!=t.key&&t.value&&void 0!==t.value&&(this.settings[t.key]=t.value,console.log("setSettings....",this.settings),$SD.api.setSettings(e.context,this.settings))},setTitle:function(e){this.settings&&this.settings.hasOwnProperty("mynameinput")&&(console.log("watch the key on your StreamDeck - it got a new title...",this.settings.mynameinput),$SD.api.setTitle(e.context,this.settings.mynameinput))},doSomeThing:function(e,t,o){console.log("%c%s",`color: white; background: ${o||"grey"}; font-size: 15px;`,`[app.js]doSomeThing from: ${t}`)}};
},{"obs-websocket-js":"omp6"}]},{},["A2T1"], null)
//# sourceMappingURL=/app.js.map